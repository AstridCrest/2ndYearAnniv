<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>2nd Anniversary Message</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap');

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Poppins", sans-serif;
    }

    body {
      background: linear-gradient(135deg, #c9d5ff, #c084fc, #a855f7);
      color: #fff;
      overflow-x: hidden;
      position: relative;
      min-height: 100vh;
    }

    #hearts-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      overflow: hidden;
      pointer-events: none;
    }

    #letter p {
      color: #fff; /* deep lavender-gray â€” readable but still soft */
      font-weight: 500;
      line-height: 1.7;
      text-shadow: 0 1px 2px rgba(255, 255, 255, 0.25); /* gentle glow for contrast */
    }

    .heart {
      position: absolute;
      bottom: -10px;
      color: #fff;
      font-size: 10px;
      opacity: 0.4;
      animation: floatUp 9s linear infinite;
      z-index: 0;
      pointer-events: none;
      filter: blur(0.5px);
    }

    @keyframes floatUp {
      0% {
        transform: translateY(0) scale(1);
        opacity: 0.5;
      }
      100% {
        transform: translateY(-100vh) scale(1.6);
        opacity: 0;
      }
    }

    header {
      text-align: center;
      padding: 80px 20px 40px;
      position: relative;
      z-index: 2;
    }

    header h1 {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-size: 2.3em;
      margin-bottom: 10px;
      color: #fff;
      text-shadow: 0 0 10px rgba(255, 255, 255, 0.6);
    }

    header p {
      font-size: 1em;
      color: #f5eaff;
      margin-top: 10px;
      text-align: center;
      max-width: 90%;
    }

    section {
      max-width: 600px;
      margin: 100px auto;
      border-radius: 20px;
      padding: 30px;
      position: relative;
      z-index: 2;
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(12px);
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    h2 {
      text-align: center;
      margin-bottom: 20px;
      color: #fff;
      font-weight: 600;
      text-shadow: 0 0 8px rgba(255, 255, 255, 0.4);
    }

    p {
      text-align: justify;
      line-height: 1.8;
      color: #fdfcff;
      position: relative;
      z-index: 3;
      font-size: 0.95em;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
    }

    #music {
      text-align: center;
    }

    #music audio {
      width: 100%;
      max-width: 400px;
      border-radius: 10px;
      margin-top: 10px;
      outline: none;
      box-shadow: 0 0 15px rgba(255, 255, 255, 0.3);
    }

    #photos {
      text-align: center;
      margin: 60px auto;
      padding: 25px;
      background: rgba(255, 255, 255, 0.15);
      border-radius: 20px;
      backdrop-filter: blur(10px);
      max-width: 600px;
    }

    .photo-grid {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
    }

    .photo-grid img {
      width: 100%;
      max-width: 170px;
      border-radius: 15px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .photo-grid img:hover {
      transform: scale(1.05);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
    }

    footer {
      text-align: center;
      margin: 60px 0 80px;
      color: #fff;
      font-size: 1.1em;
      position: relative;
      z-index: 2;
      opacity: 0.9;
    }

    @media (max-width: 600px) {
      header h1 {
        font-size: 1.9em;
      }
      section {
        margin: 40px 20px;
        padding: 20px;
      }
      p {
        font-size: 0.9em;
      }
    }

    #start-screen {
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      background: linear-gradient(135deg, #c9d5ff, #c084fc, #a855f7);
      color: white;
      text-align: center;
      z-index: 10;
      position: fixed;
      width: 100%;
      top: 0;
      left: 0;
    }

    #start-screen h1 {
      font-size: 2em;
      margin-bottom: 20px;
    }

    #enter-btn {
      padding: 15px 30px;
      font-size: 1em;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      background: #a855f7;
      color: white;
      transition: 0.3s;
    }

    #enter-btn:hover {
      background: #c084fc;
    }
    #envelope-sect {
      text-align: center;
      margin-top: 40px;
    }

    #letter {
      opacity: 0;
      transform: translateY(30px);
      transition: opacity 1s ease, transform 1s ease;
    }

    #letter.visible {
      opacity: 1;
      transform: translateY(0);
    }

    #close-letter {
    background: linear-gradient(135deg, #a855f7, #c084fc);
    box-shadow: 0 4px 10px rgba(168, 85, 247, 0.3);
    transition: all 0.3s ease;
  }

  #close-letter:hover {
    transform: scale(1.05);
    box-shadow: 0 6px 15px rgba(192, 132, 252, 0.5);
  }

    .envelope {
      position: relative;
      width: 200px;
      height: 180px;
      margin: 100px auto;
      cursor: pointer;
      animation: floaty 3s ease-in-out infinite;
      perspective: 800px;
    }
    
    @keyframes floaty {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-6px); }
    }

    @keyframes envelopeFloat {
      0%, 100% {
        transform: translateY(0);
      }
      50% {
        transform: translateY(-6px);
      }
    }

    /* Envelope base */
    .envelope-body {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #b06fe3, #9a4df4);
      border-radius: 0 0 8px 8px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      z-index: 3;
      overflow: hidden;
    }

    /* The top flap (folded triangle) */
    .envelope-flap {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 60%;
      background: linear-gradient(135deg, #a94ff0 0%, #9333ea 100%);
      clip-path: polygon(0 0, 50% 100%, 100% 0);
      transform-origin: top center;
      transition: transform 1.2s cubic-bezier(0.55, 0.06, 0.68, 0.19);
      backface-visibility: hidden;
      perspective: 1000px;
      z-index: 4;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    }

    .envelope-letter {
      position: absolute;
      bottom: 8px;
      left: 50%;
      transform: translateX(-50%) translateY(0);
      width: 88%;
      height: 72%;
      background: rgb(247, 119, 247);
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5em;
      color: #a855f7;
      opacity: 0;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      transition: transform 0.8s ease 0.3s, opacity 0.3s ease 0.3s;
      z-index: 2; /* BELOW body, ABOVE background */
    }

    .envelope-flap::after {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, #cfa9ff, #b983f8);
      transform: rotateX(180deg);
      backface-visibility: hidden;
      border-top-left-radius: 8px;
      border-top-right-radius: 8px;
    }

    /* Open animation */
    .envelope.open .envelope-flap {
      transform: rotateX(-180deg);
      box-shadow: 0 8px 18px rgba(0, 0, 0, 0.25);
    }

    .envelope.open .envelope-body {
      transform: scale(1.02);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
    }


    .envelope.open .envelope-letter {
      opacity: 1;
      transform: translateX(-50%) translateY(-180px);
      transition-delay: 1s;
      z-index: 2; /* stays behind body */
    }
    .caption {
      text-align: center;
      font-weight: bold;
      color: rgb(12, 12, 12);
      margin-top: 10px;
      font-size: 1.1em;
    }

    #open-text {
      color: #fff;
      opacity: 0.9;
      font-size: 1em;
      transition: opacity 0.5s ease;
    }

    .heart-burst {
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      font-size: 1.5em;
      animation: floatHearts 1.5s ease forwards;
      pointer-events: none;
    }

    @keyframes floatHearts {
      0% { opacity: 0; transform: translate(-50%, 0) scale(0.5); }
      50% { opacity: 1; transform: translate(-50%, -40px) scale(1.2); }
      100% { opacity: 0; transform: translate(-50%, -80px) scale(1); }
    }

    #vignette {
      position: fixed;
      inset: 0;
      pointer-events: none;
      background: radial-gradient(circle at center, rgba(0,0,0,0) 60%, rgba(0,0,0,0.3) 100%);
      z-index: 1;
    }
    
    body.open-bg {
      background: radial-gradient(circle at center, #2e003e 0%, #1a001f 100%);
      transition: background 2s ease;
    }

    #letter span {
      opacity: 0;
      animation: fadeInChar 0.03s forwards;
    }

    @keyframes fadeInChar {
      to { opacity: 1; }
    }

    #main-content {
      opacity: 0;
      filter: blur(10px);
      transition: opacity 1s ease, filter 1s ease;
    }

    #main-content.visible {
      opacity: 1;
      filter: blur(0);
    }
  </style>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const container = document.createElement("div");
      container.id = "hearts-container";
      document.body.prepend(container);

      const colors = ['#ffffff', '#f5eaff', '#f0abfc'];

      function createHeart() {
        const heart = document.createElement('div');
        heart.classList.add('heart');
        heart.textContent = 'ðŸ’œ';
        heart.style.left = Math.random() * 100 + 'vw';
        heart.style.animationDuration = (3 + Math.random() * 3) + 's';
        heart.style.fontSize = (12 + Math.random() * 20) + 'px';
        heart.style.color = colors[Math.floor(Math.random() * colors.length)];
        container.appendChild(heart);
        setTimeout(() => heart.remove(), 6000);
      }

      setInterval(createHeart, 300);
    });
  </script>
</head>

<body>
  <div id="start-screen">
    <h1>Happy 2nd Anniversary Mommy ko!! ðŸ’–ðŸ’–</h1>
    <button id="enter-btn">Enter</button>
  </div>

  <audio id="bg-music" loop>
    <source src="bgMusic.mp3" type="audio/mpeg">
  </audio>

  <div id="vignette"></div>

  <div id="main-content" style="display: none;">
    <header>
      <h1>
        Happy 2nd Anniversary Mommy ko!! ðŸ’–ðŸ’–
        <p>Dalawang Taon ng pagmamahalan, tawanan, iyakan, asaran, awayan, at mga memories natin ðŸ¥ºðŸ’–</p>
      </h1>
    </header>

    <section id="envelope-sect">
      <div class="envelope" id="envelope">
        <div class="envelope-flap"></div>
        <div class="envelope-body"></div>
        <div class="envelope-letter">ðŸ“©</div>
      </div>
      <p id="open-text">
        Letter para sa baby ko ðŸ’–ðŸ’–ðŸ’–
      </p>
    </section>

    <section id="letter">
      <h2>Letter pinakamahal kong babae</h2>
      <p>
        Happy 2nd Anniversary mhieeeee!! ðŸ’– <br><br>

        Thank you po kasi umabot tayo ng ganito katagal hehe, lab na lab po kita sobra. <br>
        Sorry po sa mga nasasabi ko kapag nag aaway tayo, alam ko po na nasasabi mo din yung mga yun kasi galit ka po, <br>
        pero kahit papaano po gusto ko po na malaman mo na hinding hindi kita iiwan, hindi rin po kita susukuan. <br>
        2 years na po tayong away bati, kahit ldr tayo e nagagawan padin ng paraan para tumagal. <br>
        Sana po mas lalo pa tayong tumagal, at wag mo po isipin palagi na sinusumbatan kita ha. <br><br>

        Alam mo mhie, sobrang dami na nating napagdaanan. <br>
        Sana po palagi mo po isipin na mahal na mahal na mahal kita, at ikaw lang ang nag iisa kong baby <br>
        Kahit lagi tayong nagkakatampuhan, mas nangingibabaw pa rin yung pagmamahal natin sa isaâ€™t isa. <br>
        Sobrang thankful ako kasi kahit gaano tayo ka-busy, o kahit di tayo magkausap minsan, <br>
        andyan ka pa rin palagi para saâ€™kin. <br>
        Ang sarap lang isipin na may taong kagaya mo na handang sabayan ako sa lahat. <br><br>

        Sana mhie, habang tumatagal, mas lalo pa tayong maging matatag. <br>
        Ayokong matapos â€˜to, gusto ko tayo pa rin hanggang sa dulo. <br>
        Gagawin ko lahat para mapasaya ka araw-araw kahit sa simpleng paraan lang. <br>
        Kahit malayo ka, palagi kang nasa isip ko at sa puso ko. <br>
        Mahal na mahal kita mhie, sobra sobra. <br>
        Happy 2nd Anniversary ulit, at sana marami pa tayong taon na pagsasamahan. ðŸ’–
      </p>
      <button id="close-letter" style="
          display:block;
          margin: 30px auto 0;
          padding: 10px 25px;
          font-size: 1em;
          background: #a855f7;
          color: white;
          border: none;
          border-radius: 10px;
          cursor: pointer;
          transition: 0.3s;
        ">
          Close ðŸ’Œ
      </button>
    </section>

    <section id="photos">
      <h2>Memories natin ðŸ¥ºðŸ’–</h2>
      <div class="photo-grid">
        <img src="pic 1.jpg" alt="Memory 1">
        <img src="pic 2.jpg" alt="Memory 2">
        <img src="pic 3.jpg" alt="Memory 3">
        <img src="pic 4.jpg" alt="Memory 4">
        <img src="pic 5.jpg" alt="Memory 5">
      </div>
    </section>
    
    <section id="music">
      <h2>Team song na ba this? hehehe</h2>
      <audio id="main-music" controls>
        <source src="song.mp3" type="audio/mpeg">
      </audio>
    </section>
  </div>

  <script>
    const enterBtn = document.getElementById('enter-btn');
    const startScreen = document.getElementById('start-screen');
    const mainContent = document.getElementById('main-content');
    const bgMusic = document.getElementById('bg-music');
    const mainMusic = document.getElementById('main-music');

    // âœ¨ Smooth fade-in setup for main content
    mainContent.style.opacity = '0';
    mainContent.style.filter = 'blur(10px)';
    mainContent.style.transition = 'opacity 1s ease, filter 1s ease';

    // ðŸŽµ ENTER BUTTON â€” play music immediately (fix autoplay)
    enterBtn.addEventListener('click', () => {
      // Start background music safely within user gesture
      bgMusic.volume = 0;
      bgMusic.play().catch(err => console.log("Autoplay blocked:", err));

      // Smooth fade-in of bgMusic
      let vol = 0;
      const fadeIn = setInterval(() => {
        if (vol < 0.3) {
          vol += 0.02;
          bgMusic.volume = vol;
        } else {
          clearInterval(fadeIn);
        }
      }, 200);

      // Fade out start screen
      startScreen.style.transition = 'opacity 0.6s ease';
      startScreen.style.opacity = '0';
      setTimeout(() => {
        startScreen.style.display = 'none';
        mainContent.style.display = 'block';

        // Smoothly show main content
        setTimeout(() => {
          mainContent.style.opacity = '1';
          mainContent.style.filter = 'blur(0)';
        }, 50);
      }, 600);
    });

    // ðŸŽ§ MUSIC CROSSFADE LOGIC
    mainMusic.addEventListener('play', () => {
      let fadeOut = setInterval(() => {
        if (bgMusic.volume > 0.01) {
          bgMusic.volume = Math.max(0, bgMusic.volume - 0.02);
        } else {
          clearInterval(fadeOut);
          bgMusic.pause();
        }
      }, 200);
    });

    mainMusic.addEventListener('pause', () => {
      bgMusic.play().catch(err => console.log("Autoplay blocked:", err));
      let fadeIn = setInterval(() => {
        if (bgMusic.volume < 0.3) {
          bgMusic.volume = Math.min(0.3, bgMusic.volume + 0.02);
        } else {
          clearInterval(fadeIn);
        }
      }, 200);
    });
  </script>
  <script>
    const envelopeSect = document.getElementById('envelope-sect');
    const envelope = document.getElementById('envelope');
    const openText = document.getElementById('open-text');
    const letterSection = document.getElementById('letter');
    const closeBtn = document.getElementById('close-letter');

    // Select all other sections except envelope + letter
    const otherSections = document.querySelectorAll(
      'section:not(#envelope-sect):not(#letter)'
    );

    letterSection.style.display = 'none';
    let opened = false;

    envelope.addEventListener('click', () => {
      if (opened) return;
      opened = true;

      envelope.classList.add('open');
      openText.style.opacity = '0';
      document.body.classList.add('open-bg');

      // Floating hearts
      for (let i = 0; i < 4; i++) {
        const heart = document.createElement('div');
        heart.className = 'heart-burst';
        heart.textContent = ['ðŸ’–', 'ðŸ’ž', 'ðŸ’˜', 'ðŸ’œ'][i];
        heart.style.animationDelay = `${i * 0.2}s`;
        envelope.appendChild(heart);
        setTimeout(() => heart.remove(), 1500);
      }

      // Apply blur + fade to other sections
      otherSections.forEach(sec => {
        sec.style.transition = 'opacity 0.8s ease, filter 1s ease';
        sec.style.filter = 'blur(10px)';
        sec.style.opacity = '0';
        setTimeout(() => (sec.style.display = 'none'), 1000);
      });

      // Fade out envelope section
      setTimeout(() => {
        envelopeSect.style.transition = 'opacity 0.8s ease, filter 1s ease';
        envelopeSect.style.filter = 'blur(10px)';
        envelopeSect.style.opacity = '0';
      }, 1500);

      // Show letter
      setTimeout(() => {
        envelopeSect.style.display = 'none';
        letterSection.style.display = "block";
        letterSection.style.opacity = '0';
        letterSection.style.filter = 'blur(10px)';
        setTimeout(() => {
          letterSection.classList.add("visible");
          letterSection.style.transition = 'opacity 1s ease, filter 1s ease';
          letterSection.style.opacity = '1';
          letterSection.style.filter = 'blur(0px)';

          document.body.classList.add('open-bg');
        }, 300);
        letterSection.scrollIntoView({ behavior: 'smooth' });
      }, 2300);
      setTimeout(animateLetterText, 300);
    });

    // Close button behavior
    closeBtn.addEventListener('click', () => {
      letterSection.style.transition = 'opacity 0.8s ease, filter 1s ease';
      letterSection.style.opacity = '0';
      letterSection.style.filter = 'blur(10px)';
      document.body.classList.remove('open-bg');

      setTimeout(() => {
        letterSection.style.display = 'none';
        envelopeSect.style.display = 'block';
        envelopeSect.style.filter = 'blur(0px)';
        setTimeout(() => {
          envelopeSect.style.opacity = '1';
          opened = false;
          envelope.classList.remove('open');
          openText.style.opacity = '1';
        }, 100);

        // Bring back other sections softly
        otherSections.forEach(sec => {
          sec.style.display = 'block';
          sec.style.opacity = '0';
          sec.style.filter = 'blur(10px)';
          setTimeout(() => {
            sec.style.transition = 'opacity 1s ease, filter 1s ease';
            sec.style.opacity = '1';
            sec.style.filter = 'blur(0px)';
          }, 50);
        });
      }, 800);
    });
  </script>
  <script>
    function animateLetterText() {
      const letterText = document.querySelector('#letter p');
      const text = letterText.innerHTML; // store original HTML (so <br> works)
      letterText.innerHTML = ''; // clear for typing

      let i = 0;

      function type() {
        // Only add one character or tag per step
        if (text[i] === '<') {
          // If tag detected, grab until closing '>'
          const tagEnd = text.indexOf('>', i);
          letterText.innerHTML += text.slice(i, tagEnd + 1);
          i = tagEnd + 1;
        } else {
          letterText.innerHTML += text[i];
          i++;
        }

        if (i < text.length) {
          setTimeout(type, 25); // adjust typing speed here (ms per char)
        }
      }
      type();
    }
  </script>
</body>
</html>

